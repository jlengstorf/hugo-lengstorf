"use strict";function HighlightShare(e){var t=e||{},n=t.classNames||{},a=this.config={url:t.url||window.location.href,hashtags:t.hashtags||"",related:t.related||"jlengstorf",via:t.via||"",classNames:{wrapper:n.wrapper||"highlight-share__share-box",active:n.active||"highlight-share__is-active",tweetBtn:n.tweetBtn||"highlight-share__share-btn--twitter"},container:t.container||"body",appendTo:"body"},i=document.createElement("div"),o=document.createElement("button");this.savedText=!1,this.isActive=!1,o.className=a.classNames.tweetBtn,i.className=a.classNames.wrapper,i.appendChild(o),i.addEventListener("click",this.handleButtonClick.bind(this)),this.container=document.querySelector(this.config.container),document.querySelector(a.appendTo).appendChild(i),document.addEventListener("mouseup",this.handleSelection.bind(this))}!function(){var e=document.querySelectorAll(".five-stages");e&&!function(){var t=function(e,t){return function(){n(e)?e.classList.add("js__in-viewport"):e.classList.remove("js__in-viewport")}},n=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)};[].forEach.call(e,function(e){e.classList.add("js__active");var n=t(e);addEventListener("scroll",n,!1)})}()}(),HighlightShare.prototype=Object.create({constructor:{value:HighlightShare}}),HighlightShare.prototype.getSelectedText=function(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return!1},HighlightShare.prototype.restoreSelectedText=function(e){if(e)if(window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else document.selection&&e.select&&e.select()},HighlightShare.prototype.handleSelection=function(e){this.savedText=this.getSelectedText(),this.isInContainer(e.target)&&setTimeout(this.showSharingBox.bind(this),100,e)},HighlightShare.prototype.showSharingBox=function(e){var t=0===this.savedText.toString().length,n=this.getWrapper(),a=["a","img","button","input","select"],i=e.target.tagName.toLowerCase();t||this.isActive||-1!==a.indexOf(i)?this.hideSharingBox():(this.isActive=!0,n.style.left=e.pageX+"px",n.style.top=e.pageY+"px",n.className+=" "+this.config.classNames.active)},HighlightShare.prototype.handleButtonClick=function(e){this.savedText&&(-1!==e.target.className.indexOf(this.config.classNames.tweetBtn)&&window.open(this.buildTwitterUrl(),"sharing-window","width=600, height=400, top=200, left=300"),this.restoreSelectedText(this.savedText))},HighlightShare.prototype.hideSharingBox=function(){var e=this.getWrapper(),t=e.className.replace(this.config.classNames.active,"");e.style.left="",e.style.top="",e.className=t,this.isActive=!1},HighlightShare.prototype.buildTwitterUrl=function(){var e="https://twitter.com/intent/tweet",t={text:this.savedText,url:this.config.url||"",hashtags:this.config.hashtags||"",related:this.config.related||"",via:this.config.via||""},n="";for(var a in t)t[a].toString().length>0&&(n+=0===n.length?"?":"&",n+=a+"="+t[a]);return e+n},HighlightShare.prototype.getWrapper=function(){return document.getElementsByClassName(this.config.classNames.wrapper)[0]},HighlightShare.prototype.isInContainer=function(e){return null===this.container?!1:this.container===e?!1:this.container.contains(e)},function(){function e(e,t,n){return new Promise(function(a,i){var o=e.scrollTop,r=t-o,s=20,c=function(e,t,n,a){return e/=a/2,1>e?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},l=function d(t){t+=s;var i=c(t,o,r,n);e.scrollTop=i,n>t?setTimeout(function(){d(t)},s):a()};l(0)})}function t(t){return new Promise(function(a,i){if(!L){L=!0;var o=t.split("#")[1]||!1,r=document.location,s=r.protocol+"//"+r.host+r.pathname;if(console.log(o),!t.replace(s,"").match(/^http/)&&o){event.preventDefault();var c=document.getElementById(o),l="mobile"===n?60:70,d=c.offsetTop-l;c.offsetParent.classList.contains("post-footnotes")&&(d+=c.offsetParent.offsetTop+30);var h=document.body.scrollTop,u=h?document.body:document.documentElement;e(u,d,750).then(function(){L=!1,a()})}}})}var n=window.getComputedStyle(document.body,":after").getPropertyValue("content").replace(/\W/g,""),a=Date.now(),i=new Date("2014-12-30T12:00:00"),o=Math.ceil((a-i)/864e5),r=document.querySelector(".days-abroad");r&&(r.textContent=o+" days");var s=document.querySelector(".subnav-toggle");if(s.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".site-header"),n=void 0;t.classList.contains("closed")?(t.classList.remove("closed"),t.classList.add("open"),n="Less"):(t.classList.remove("open"),n="More",setTimeout(function(){t.classList.add("closed")},500)),s.textContent=n}),"desktop"===n)for(var c=document.querySelectorAll(".main-content__sharing"),l=function(e){e.target.classList.contains("main-content__sharing-link")&&(e.preventDefault(),window.open(e.target.href,"sharing-window","width=800, height=400, top=200, left=300"))},d=0;d<c.length;d++)c[d].addEventListener("click",l);if(n.length)for(var h=[".main-content__headline",".main-content__headline--related",".main-content__headline--single"].join(","),u=document.querySelectorAll(h),g=void 0,m=void 0,d=0;d<u.length;d++)g=u[d],m=g.dataset.image,g.style.backgroundImage="url("+m+")",g.classList.add("show-image");if("desktop"===n){var f=[".main-content__headline",".main-content__headline--single",".main-content__headline--page"].join(","),p=document.querySelectorAll(f);if(p.length>0){var v=p[0],w=v.dataset.image,y=document.querySelector("body"),S=window.getComputedStyle(y).backgroundColor,b=void 0;b=-1===S.indexOf("rgba")?S.replace(")",", 0.92)").replace("rgb","rgba"):S;var _="linear-gradient(to bottom, "+b+", "+S+" 50vw)";y.style.backgroundImage=_+", url("+w+")"}}var L=!1;document.addEventListener("click",function(e){var n=e.target;"a"===n.tagName.toLowerCase()&&"undefined"!==n.href&&!function(){var e=n.href;t(e).then(function(){history.pushState({newURL:e},"",e)})}()}),window.addEventListener("hashchange",function(e){e.preventDefault();var n=e.newURL;t(n)});var T=document.querySelector(".footnotes");if(null!==T){var N=T.getElementsByTagName("OL"),x=document.querySelector(".post-footnotes");N[0].classList.add("post-footnotes__list"),x.appendChild(N[0]),x.classList.remove("hidden"),T.parentNode&&T.parentNode.removeChild(T)}var E=function(e){ga("send","event","outbound","click",e,{hitCallback:function(){document.location=e}})};if(document.addEventListener("click",function(e){e.target.classList.contains("js__ga-track-outbound")&&(e.preventDefault(),E(e.target.href))}),n.length){new HighlightShare({via:"jlengstorf",container:".main-content__content"})}}(),function(){var e=document.getElementById("contact");e&&!function(){var t=function(e,t){var n="https://mandrillapp.com/api/1.0/messages/send.json",a=new XMLHttpRequest,i=JSON.stringify(e);a.open("POST",n),a.onload=t.bind(a),a.send(i)},n=function(e){e.classList.add("disabled"),e.getElementsByTagName("BUTTON")[0].disabled=!0},a=function(e){e.getElementsByTagName("BUTTON")[0].disabled=!1,e.classList.remove("disabled")},i=function(e,t){var n=document.createElement("div"),a=document.createElement("p");n.classList.add("opt-in__error"),a.classList.add("opt-in__error-message"),a.textContent=t,n.appendChild(a),e.insertBefore(n,e.firstChild)},o=function(e){var t=e.querySelectorAll(".opt-in__error");[].map.call(t,function(t){return e.removeChild(t)})},r=function(e,t){var n=!1;return""===t.message&&(n=!0,i(e,"Please enter a message.")),""===t.email&&(n=!0,i(e,"Please enter your email.")),(""===t.fname||""===t.lname)&&(n=!0,i(e,"Please enter your full name.")),""!==t.comment&&(n=!0,i(e,"You appear to be a robot. Please reload and try again.")),n},s=function(e){var t=e.currentTarget;if(4===t.readyState&&200===t.status){var n=JSON.parse(t.responseText)[0];if("sent"===n.status){var o=window.location,r=o.origin||o.protocol+"//"+o.host;window.location=r+"/thank-you/"}else{var s=document.getElementById("contact");a(s);var c=n.reject_reason||"Please try again. Something went weird.";i(s,c)}}},c={key:null,message:{text:null,subject:"Message from lengstorf.com",from_email:null,from_name:null,to:[{email:atob("amFzb25AbGVuZ3N0b3JmLmNvbQ=="),name:atob("SmFzb24gTGVuZ3N0b3Jm"),type:"to"}]}};e.classList.remove("opt-in__hidden"),e.addEventListener("submit",function(e){e.preventDefault(),o(this);var a={};[].filter.call(this.elements,function(e){return!!e.name}).forEach(function(e){return a[e.name]=e.value});var i=r(this,a);i||(n(this),c.key=a.key,c.message.text=a.message,c.message.from_email=a.email,c.message.from_name=a.fname+" "+a.lname,t(c,s))})}()}();
//# sourceMappingURL=../maps/main-086eaef022.min.js.map